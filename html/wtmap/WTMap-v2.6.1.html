<html>
<head>
    <meta charset='utf-8'/>
    <title>WTMap</title>
    <meta content='initial-scale=1,maximum-scale=1,user-scalable=no' name='viewport'/>
    <script src="js/config-dev.js"></script>

</head>
<body>

<div style="width:100%;height:100%;background: #f00" id="bg"></div>
<div id='map'></div>

<script>
    console.log(wtmap.version);
    console.log(wtmap.Utils);
    var buildingID = '00270007';
    var use3D = true;
    // use3D = false;

    let mapOptions = {
        container: 'map',
        buildingID: buildingID,
        floorID: '00270007F03',
        // themeID: 'S1',
        use3D: use3D
    };
    let defaultHost = window.location.protocol + '//' + window.location.host;
    if (defaultHost === 'http://localhost:8112') {
        mapOptions = wtmap.Utils.extend(wtmap.DebugOptions, mapOptions);
    }
    var map = new wtmap.WTMap(mapOptions);

    var isEnglish = false;
    var ttt;
    let flag = true;
    map.on('click', function(evt) {
        console.log('Zoom: ' + map.getZoom());
        console.log(evt.lngLat);

        // flag ? map.hideLabelLayers() : map.showLabelLayers();
        flag ? map.hideLabels(['00270007F0110208']) : map.resetHidingLabels();
        flag = !flag;

        map.setBackgroundOpacity(0);
        // var fs = map.queryRenderedFeatures(evt.point, {layers: map.getLayerIDs('room')});
        // if (fs && fs.length > 0) {
        //     let feature = fs[0];
        //     // console.log(fs);
        //     console.log(fs[0].properties);
        //     console.log(fs[0].properties.id);
        //     console.log(fs[0].id);
        //
        //     map.highlightPoi([fs[0].properties.POI_ID, '00270007F0110353'], {
        //         // color: 'red'
        //     });
        // }
    });

    map.on('mapready', function(evt) {
        console.log('mapready');
        console.log('BaseZoom: ' + map.getBaseZoom());
        initFloorSwitch(map);
    });

    map.on('floorend', function() {
        // map.setZoom(20);
        // map.setCenter([114.42998769105293, 30.611772435206305]);
    });

    map.on('wheel', function() {
//        console.log("wheel");
    });

    map.on('error', function(error) {
        console.log('map-error');
        console.log(error);
    });
</script>

</body>
</html>
